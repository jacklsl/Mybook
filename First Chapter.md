# 1 引言

随着互联网的发展，游戏的变得越来越流行，小到手机上的贪吃蛇游戏大到几十个G的大型单机游戏均可以在不同设备上运行。本文所涉及到的极速跑酷游戏，是基于UnrealEngine4的2D单机游戏。

## 1.1 游戏概述

“极速跑酷”是一款2D休闲类游戏，通过UnrealEngine4的蓝图实现游戏的功能。"极速跑酷"通过两个按钮，来控制人物的动作。“跳跃”按钮控制人物的一段跳和二段跳。“滑动”按钮控制人物的滑动。用户通过控制人物吃掉物品，并躲避障碍物，并且在一定时间内不死即为胜利。

## 1.2 UnrealEngine4引擎概述

虚幻引擎是由Epic Games开发的游戏引擎，引擎主要用于第一人称游戏的开发。虚幻引擎已经开发了许多的游戏如：

表1-1虚幻引擎的应用游戏

| 游戏名称 | 开发公司 | 时间 |
| --- | --- | --- |
| 《[战争机器](http://baike.baidu.com/view/792038.htm)》\(Gears of War\) | 欧美-Epic Games | 2006 |
| 《[虚幻竞技场3](http://baike.baidu.com/view/1326682.htm)》\(Unreal Tournament 3\) | 欧美-Epic Games | 2007 |
| 《[质量效应](http://baike.baidu.com/view/1086334.htm)》\(Mass Effect\) | 加拿大-BioWare | 2008 |
| 《[战地之王](http://baike.baidu.com/view/2003960.htm)》\(Alliance of Valiant Arms\) | 韩国-Redduck | 2007 |
| 《[战争机器2](http://baike.baidu.com/view/1947585.htm)》\(Gears of War2\) | 欧美-Epic Games | 2008 |
| 《[质量效应2](http://baike.baidu.com/view/2677121.htm)》\(Mass effect2\) | 加拿大-BioWare 美国-EA | 2010 |
| 《[荣誉勋章](http://baike.baidu.com/view/45661.htm)》（medal of honor） | 美国EA DICE | 2010 |
| 《[奇异人生](http://baike.baidu.com/subview/14147420/16251672.htm)》（Life is Strange） | 美国 Dontnod Entertainment | 2015 |

                                                                 上述表1-1所示，这些有名的游戏均是虚幻引擎开发的。

目前的版本是虚幻4引擎，这是一款跨平台的游戏引擎，使用蓝图和C++两种模式进行游戏的开发。虚幻4引擎可以再Window和Mac等主流操作系统上进行运行，进而开发在不同设备平台运行的游戏。

虚幻4游戏引擎，主要用于开发第一人称的大型游戏，但是，随着游戏的发展，虚幻4 游戏引擎，开始关注，移动设备平台游戏的开发，主要包括安卓和IOS操作平台上的游戏开发。虚幻4游戏引擎，支持二代机，虚幻4的骨骼动画系统，支持复杂的骨骼结构。动画由动画物体树驱动包括：

混合控制器，对不同的动画进行混合创建更加复杂的动作。

数据驱动的控制器，封装动作捕捉或手动制作的动画数据。

物理控制器，连接到刚体动态引擎，用来实现布娃娃系统的游戏者和NPC动画和对力的物理响应。

过程动画控制器，以C++或UnrealScript实现，为了实现一些如使一个NPC的头部和眼睛跟踪一个在关卡中行走的游戏者，或使一个角色根据健康情况和疲劳度作出不同动作等特性。

提供了一个支持普通游戏对象（如游戏者，NPC，物品，武器和触发器）的面向对象的游戏框架。

丰富的多级别AI系统，能够完成一些复杂的AI

AI路径在游戏引擎中可见并且允许开发者进行自定义编辑。

在多级AI系统下，开发者可以创建，与玩家进行交互的人工智能，例如NPC的问答，宠物伴随等。

在游戏中，有很多方式实现一些动画，引擎同时也为开发者提供了一种方式- UnrealMatinee，一个基于时间线的可视化序列、动画和曲线路径工具。通过UnrealMatinee，在场景中实现声音和视觉特效，并触发游戏AI事件等。这些都可在UnrealMatinee中进行设置实现。

游戏引擎根据多普勒效应（多普勒效应：是指当发声物体在运动时，声音的音调会随着物体移动速度而改变其高低——声音频率的变化，）实现声音的实现。在游戏引擎中，通过对声音的参数进行设置实现游戏声音的播放。游戏参数的设置是不受代码的影响，这样使得声音的播放免受影响。

虚幻引擎可开发网络游戏，其网络的编程是由数据进行驱动的，其底层的网络传输是通过UDP并能够将可靠和不可靠传输方式结合，来使游戏能够在较差的网络环境下，流畅运行。

虚幻引擎下的客户端－服务器模式，可以使多个游戏玩家进行同时游戏，并且支持非服务器模式。

在游戏中，物体间的碰撞是不可避免的。虚幻引擎为开发者提供了刚性物体碰撞系统，该系统为游戏玩家提供了一个更加接近现实碰撞的系统，通过对物体进行动力学属性设置实现物体间的碰撞。

虚幻4游戏引擎，为开发者提供了许多开发工具，来帮助开发者开发更加好玩有趣的游戏。

## 1.3 课题研究的意义

本节将从本游戏的市场价值和应用价值两方面进行阐述，说明本游戏的开发意义所在。

### 1.3.1 “极速跑酷”的市场价值

手机游戏可分为单机游戏和网络游戏两大类，而极速跑酷是一款针对广大手机用户设计的休闲类的单机游戏。极速跑酷类似于天天跑酷类的游戏。

根据艾媒咨询的数据统计，单机游戏、网络游戏的市场比例如图 1–1所示，其中手机单机游戏的市场为15.1%。这说明手机单机游戏游戏的市场相对于网络游戏有很大的差距，同时也说明，单击游戏还有很大的发展空间。

从手机用户的角度来看，由于人们整天处于紧张的工作之中，工作之余也没有太多精力和时间来玩大型、复杂的游戏，所以手机用户更容易接受这种操作方便、剧情简洁小游戏，有助于人们放松心情。

而且本课题注重于“极速跑酷”游戏的简单玩法，可以给用户一种全新的感觉。本游戏为手机用户提供卡通风格的“极速跑酷”，可以为用户提供多种炫丽的游戏界面以及一种良好的用户操作体验。

图 1–1 手机用户游戏产品类型分布图\(来自：艾媒咨询\)

图 1–2 手机用户游戏单击产品类型分布图\(来自：艾媒咨询\)

在手机单机游戏中，又细分出了许多种游戏类型，有益智休闲类、棋牌类、射击类、动作类等等。根据艾媒咨询的数据统计，单机产品市场比例如图 1–2所示，很明显，在手机单机游戏中，跑酷类的市场比例竟达到22%，占有很大的一部分。这说明跑酷类单机游戏具有良好的市场前景和广阔的发展空间。

从手机用户的角度来看，由于人们整天处于紧张的工作之中，工作之余也没有太多精力和时间来玩大型、复杂的游戏，所以手机用户更容易接受这种操作方便、剧情简洁的小游戏，有助于人们放松心情。

### 1.3.2 “极速跑酷”的游戏应用价值

极速跑酷的应用价值体现在：

\(1\)极速跑酷是在UnrealEngine4 上进行开发的，使用C++和Blueprint进行游戏开发。由于游戏UnrealEngine4是可以跨平台的，所以极速跑酷可以在不同的平台上进行运行，其运行范围十分广泛。

（2）极速跑酷游戏在设计的时候尽量减小了游戏的内存，使其消耗的内存非常小，使得它可以在一些性能低的设备上进行运行。

（3）极速跑酷很容易进行操作，并且娱乐性高，这样会使玩家能够很快的学会游戏的操作。

## 1.4 课题研究的主要内容

本论文严格按照软件工程的流程对本课题进行了设计与实现，采用面向对象的思想进行了游戏的框架设计和蓝图编码实现。

本科题是基于UnrealEngine4游戏引擎进行开发的。所以必须熟悉基于UnrealEngine4引擎游戏开发的基本理论和技术，此外，还需了解UnrealEngine4的特性和游戏规则，在此基础上将操作时的逻辑性体现出来，是本课题的核心部分，此外还设计其他方面：UMG，数据存储，关卡创建，宠物伴随等问题。同时还需解决好开场视频和背景音乐等一些问题。

由于UnrealEngine4能够跨平台，我们可以在多个平台进行进一步调试和运行使得游戏效果需要完全符合用户的需求。

## 1.5 论文结构

本论文共分为七章，内容安排如下：

第一章：主要介绍本课题研究的背景与意义和游戏引擎的概述，并且介绍了极速跑酷的游戏特色和开发价值。 讲述本课题将要研究的主要内容和论文的结构。

第二章：对本游戏所需的开发环境和关键技术进行了详细的介绍。

第三章：对游戏需求进行了详细的阐述，包括功能和非功能的需求进行了描述。

第四章：对游戏的总体设计进行了详细的描述，包括游戏总体技术方案和游戏的功能模块进行了设计。

第五章：根据游戏的总体设计和功能模块的划分，对游戏进行详细设计，包括游戏框架和游戏核心程序，以及游戏界面等。

第六章：对游戏实现前期，做好一定的准备，实现游戏的设计，包括游戏核心的实现以及游戏界面的实现等。

第七章：对本论文设计和实现过程中的一些感慨，以及对指导老师韩璞老师的感激之情等。

